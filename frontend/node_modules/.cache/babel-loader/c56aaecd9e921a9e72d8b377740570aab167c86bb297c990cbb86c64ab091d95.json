{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import{NavLink,useParams,useHistory}from'react';import{SimpleImageSlider}from\"react-simple-image-slider\";import{AuthContext}from\"../../shared/context/auth-context\";import'./View.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const View=()=>{const[product,setProduct]=useState(null);const[heartColor,setHeartColor]=useState('ffffff');const[owner,setOwner]=useState(null);const{pid}=useParams();const auth=useContext(AuthContext);const history=useHistory();useEffect(()=>{const fetchProduct=async()=>{const res=await fetch(`http://localhost:5000/product/${pid}`,{method:'GET',headers:{'Content-Type':'application/json'}});const data=await res.json();if(res.ok){setProduct(data.product);setOwner(data.product.owner);if(data.product.heartsUsers.includes(auth.userId)){setHeartColor('e32636');}document.title=`View Page - ${data.product.productName}`;}};fetchProduct();},[pid,auth.userId]);const heartHandler=async()=>{if(!auth.isLoggedIn){history.replace('/login');return;}const newColor=heartColor==='ffffff'?'e32636':'ffffff';setHeartColor(newColor);await fetch(`http://localhost:5000/product/heart/${pid}`,{method:'POST',headers:{'Authorization':`Bearer ${auth.token}`,'Content-Type':'application/json'},body:JSON.stringify({'userId':auth.userId})});};// Local images for the slider, stored in public or assets folder\nconst images=[\"/images/image1.jpg\",\"/images/image2.jpg\",\"/images/image3.jpg\"// Add more image paths as needed\n];return/*#__PURE__*/_jsxs(\"div\",{className:\"view-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[images.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"img\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"heart-btn\",onClick:heartHandler,src:`https://img.icons8.com/material-rounded/34/${heartColor}/loading-heart.png`,alt:\"heart icon\"}),/*#__PURE__*/_jsx(SimpleImageSlider,{width:500// Adjust slider width\n,height:300// Adjust slider height\n,images:images.map(img=>({url:img}))// Map to slider format\n,showBullets:true// Option to show bullets\n,showNavs:true// Option to show navigation arrows\n})]}),images.length>0&&/*#__PURE__*/_jsxs(\"p\",{className:\"ind\",children:[1,\" / \",images.length]})]}),product&&owner&&/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:product.productName}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/public/guest-icon.png\",alt:\"guest icon\"}),/*#__PURE__*/_jsx(\"p\",{children:owner.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price row\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/public/price-icon.png\",alt:\"price icon\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$ \",product.price]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hearts row\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/public/heart-icon.png\",alt:\"heart icon\"}),/*#__PURE__*/_jsx(\"p\",{children:product.hearts})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-size row\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/public/archive-icon.png\",alt:\"file size icon\"}),/*#__PURE__*/_jsx(\"p\",{children:product.fileSize>1000000?`${Math.round(product.fileSize/(1024*1024))}MB`:`${Math.round(product.fileSize/1024)}KB`})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"date row\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/public/calendar-icon.png\",alt:\"calendar icon\"}),/*#__PURE__*/_jsx(\"p\",{children:new Date(product.createdDate).toUTCString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/public/download-icon.png\",alt:\"download icon\"}),/*#__PURE__*/_jsx(\"p\",{children:product.downloads})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[auth.isLoggedIn?/*#__PURE__*/_jsx(\"button\",{children:\"ADD TO CART\"}):/*#__PURE__*/_jsx(NavLink,{to:'/login',children:\"Add To Cart\"}),auth.userId===owner.id&&/*#__PURE__*/_jsx(NavLink,{className:\"danger\",to:`/delete/${product.id}`,children:\"DELETE\"}),auth.userId===owner.id&&/*#__PURE__*/_jsx(NavLink,{className:\"warning\",to:`/update/${product.id}`,children:\"EDIT\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"decription\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{children:product.description})]})]})]});};export default View;","map":{"version":3,"names":["React","useContext","useEffect","useState","NavLink","useParams","useHistory","SimpleImageSlider","AuthContext","jsx","_jsx","jsxs","_jsxs","View","product","setProduct","heartColor","setHeartColor","owner","setOwner","pid","auth","history","fetchProduct","res","fetch","method","headers","data","json","ok","heartsUsers","includes","userId","document","title","productName","heartHandler","isLoggedIn","replace","newColor","token","body","JSON","stringify","images","className","children","length","onClick","src","alt","width","height","map","img","url","showBullets","showNavs","name","price","hearts","fileSize","Math","round","Date","createdDate","toUTCString","downloads","to","id","description"],"sources":["/home/anjali/shri/Freelance/frontend/src/pages/View/View.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { NavLink, useParams, useHistory } from 'react';\nimport { SimpleImageSlider } from \"react-simple-image-slider\";\nimport { AuthContext } from \"../../shared/context/auth-context\";\nimport './View.css';\n\nconst View = () => {\n    const [product, setProduct] = useState(null);\n    const [heartColor, setHeartColor] = useState('ffffff');\n    const [owner, setOwner] = useState(null);\n    \n    const { pid } = useParams();\n    const auth = useContext(AuthContext);\n    const history = useHistory();\n\n    useEffect(() => {\n        const fetchProduct = async () => {\n            const res = await fetch(`http://localhost:5000/product/${pid}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            const data = await res.json();\n            if (res.ok) {\n                setProduct(data.product);\n                setOwner(data.product.owner);\n                if (data.product.heartsUsers.includes(auth.userId)) {\n                    setHeartColor('e32636');\n                }\n                document.title = `View Page - ${data.product.productName}`;\n            }\n        };\n        fetchProduct();\n    }, [pid, auth.userId]);\n\n    const heartHandler = async () => {\n        if (!auth.isLoggedIn) {\n            history.replace('/login');\n            return;\n        }\n        const newColor = heartColor === 'ffffff' ? 'e32636' : 'ffffff';\n        setHeartColor(newColor);\n        await fetch(`http://localhost:5000/product/heart/${pid}`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${auth.token}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                'userId': auth.userId\n            })\n        });\n    };\n\n    // Local images for the slider, stored in public or assets folder\n    const images = [\n        \"/images/image1.jpg\",\n        \"/images/image2.jpg\",\n        \"/images/image3.jpg\"\n        // Add more image paths as needed\n    ];\n\n    return (\n        <div className=\"view-container\">\n            <div className=\"left\">\n                {images.length > 0 && (\n                    <div className=\"img\">\n                        <img\n                            className=\"heart-btn\"\n                            onClick={heartHandler}\n                            src={`https://img.icons8.com/material-rounded/34/${heartColor}/loading-heart.png`}\n                            alt=\"heart icon\"\n                        />\n\n                        {/* Simple Image Slider for Sliding the Images */}\n                        <SimpleImageSlider\n                            width={500} // Adjust slider width\n                            height={300} // Adjust slider height\n                            images={images.map(img => ({ url: img }))} // Map to slider format\n                            showBullets={true} // Option to show bullets\n                            showNavs={true} // Option to show navigation arrows\n                        />\n                    </div>\n                )}\n                {images.length > 0 && <p className=\"ind\">{1} / {images.length}</p>}\n            </div>\n\n            {product && owner && (\n                <div className=\"right\">\n                    <h1 className=\"title\">{product.productName}</h1>\n                    <div className=\"row\">\n                        <img src=\"/public/guest-icon.png\" alt=\"guest icon\" />\n                        <p>{owner.name}</p>\n                    </div>\n                    <div className=\"price row\">\n                        <img src=\"/public/price-icon.png\" alt=\"price icon\" />\n                        <p>$ {product.price}</p>\n                    </div>\n                    <div className=\"hearts row\">\n                        <img src=\"/public/heart-icon.png\" alt=\"heart icon\" />\n                        <p>{product.hearts}</p>\n                    </div>\n                    <div className=\"file-size row\">\n                        <img src=\"/public/archive-icon.png\" alt=\"file size icon\" />\n                        <p>{product.fileSize > 1000000 ? `${Math.round(product.fileSize / (1024 * 1024))}MB` : `${Math.round(product.fileSize / 1024)}KB`}</p>\n                    </div>\n                    <div className=\"date row\">\n                        <img src=\"/public/calendar-icon.png\" alt=\"calendar icon\" />\n                        <p>{new Date(product.createdDate).toUTCString()}</p>\n                    </div>\n                    <div className=\"row\">\n                        <img src=\"/public/download-icon.png\" alt=\"download icon\" />\n                        <p>{product.downloads}</p>\n                    </div>\n                    <div className=\"flex\">\n                        {auth.isLoggedIn ? <button>ADD TO CART</button> : <NavLink to={'/login'}>Add To Cart</NavLink>}\n                        {auth.userId === owner.id && <NavLink className=\"danger\" to={`/delete/${product.id}`}>DELETE</NavLink>}\n                        {auth.userId === owner.id && <NavLink className=\"warning\" to={`/update/${product.id}`}>EDIT</NavLink>}\n                    </div>\n                    <div className=\"decription\">\n                        <h2>Description</h2>\n                        <p>{product.description}</p>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default View;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}